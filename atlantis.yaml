version: 3
projects:
  - name: opentofu
    dir: opentofu
    autoplan:
      when_modified: ["*.tf","*.tfvars","*.yaml","*.yml"]
      enabled: true
    workflow: tofu
workflows:
  tofu:
    plan:
      steps:
        - run: tofu fmt -check -recursive
        - init
        - plan -input=false -no-color
    apply:
      steps:
        - apply -input=false -auto-approve -no-color
